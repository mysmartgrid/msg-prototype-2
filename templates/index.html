{{define "index"}}
{{template "head" .}}
<div class="container">
	<div class="row">
		<div id="area" class="epoch category10" style="height: 200px;"></div>
		<script>
			var idx = (+new Date()) / 1000;

			var chart = $('#area').epoch({
				type: 'time.line',
				label: 'a',
				data: [
					{ label: "a", values: [{ time: idx, y: 0 }] },
				],
				axes: ['left', 'right', 'bottom'],
				tickFormats: {
					left: function(d) {
						return d + " W";
					}
				},
				ticks: {
					time: 10,
				},
				historySize: 120,
				windowSize: 120
			});

			if (window["WebSocket"]) {
				var ws = new WebSocket(wsEndpoint, ["msgp-1"]);

				ws.onmessage = function(e) {
					var data = JSON.parse(e.data);
					chart.push([
						{ time: data[0], y: data[1] === null ? NaN : data[1] }
					]);
				};
			}
		</script>
	</div>
</div>
{{template "tail"}}
{{end}}
